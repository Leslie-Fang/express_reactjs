var express=require("express"),router=express.Router(),my=require("../databases/mysql_api");router.get("/",function(o,e){e.send("main")}),router.get("/login",function(o,e){e.render("login")}),router.get("/signup",function(o,e){e.render("signup")}),router.post("/login",function(o,e,s){console.log(o.param("username")),console.log(o.param("password"));var r={username:o.param("username"),password:o.param("password")};console.log(r),my.validateifUserExist(o,r,e,function(o){if(console.log(o),console.log("In callback!"),"nouser"==o.state)return e.send(o);s()})},function(o,e){console.log("checkout password!"),console.log(o.param("username")),console.log(o.param("password"));var s={username:o.param("username"),password:o.param("password")};my.checkpassword(o,s,e,function(o){return console.log(o),console.log("In callback!"),e.send(o)})}),router.post("/signup",function(o,e,s){console.log(o.param("username")),console.log(o.param("password"));var r={username:o.param("username"),password:o.param("password")};console.log(r),my.validateifUserExist(o,r,e,function(o){if(console.log(o),console.log("In callback!"),"nouser"!=o.state)return e.send(o);s()})},function(o,e){console.log("checkout password!"),console.log(o.param("username")),console.log(o.param("password"));var s={username:o.param("username"),password:o.param("password")};my.saveuser(o,s,e,function(o){return console.log(o),console.log("In callback!"),e.send(o)})}),module.exports=router;